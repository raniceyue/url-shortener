(this["webpackJsonpurl-shortener"]=this["webpackJsonpurl-shortener"]||[]).push([[0],{136:function(e,t,n){},162:function(e,t){},164:function(e,t){},177:function(e,t){},179:function(e,t){},187:function(e,t,n){},193:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),c=n.n(a),i=(n(136),n(20)),s=n.n(i),o=n(35),l=n(119),u=n(29),h=n(239),j=n(242),d=n(238),f=n(77),b=n.n(f),p=n(57),O=n.n(p);O.a.config();var x="https://ranice-url-shortener.herokuapp.com/api/urls/",g="https://ranice-url-shortener.herokuapp.com/";function m(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(x,t).then((function(e){return e})).catch((function(e){return e.response}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(x+t).then((function(e){return e})).catch((function(e){return e.response}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O.a.config();var S=n(111),w=n.n(S);function N(e){return w()("sha256").update(e).digest("hex").slice(0,7)}function L(){var e=localStorage.getItem("links");return e?JSON.parse(e):(localStorage.setItem("links",JSON.stringify([])),[])}function I(e){var t=L().filter((function(t){return JSON.stringify(t)!==JSON.stringify(e)}));localStorage.setItem("links",JSON.stringify(t))}function J(e){return 0!==L().filter((function(t){return JSON.stringify(t)===JSON.stringify(e)})).length}var U=n(225),C=(n(187),n(4));function D(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(U.a,{}),Object(C.jsx)("footer",{className:"footer",children:"GovTech please hire me \xa0 | \xa0 Made with love by Ranice"})]})}var R=n(79),P=n(52),z=n(228),A=n(244),F=n(230),T=n(231),E=n(232),Y=n(240),Z=n(229);n(193);var q=function(e){var t=Object(r.useState)({open:!1,title:"",content:""}),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!1),l=Object(u.a)(i,2),h=l[0],d=l[1],f=Object(r.useState)({name:"",short:"",long:""}),b=Object(u.a)(f,2),p=b[0],O=b[1],x=""===p.short?"...":p.short;function v(){return(v=Object(o.a)(s.a.mark((function t(){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=J({name:p.name,short:p.short}),!h){t.next=5;break}c({open:!0,title:"Invalid URL!",content:"You have entered an invalid URL. Please enter a valid URL e.g. https://google.com"}),t.next=14;break;case 5:if(!n){t.next=9;break}c({open:!0,title:"Link already exists",content:"You have already created this link"}),t.next=14;break;case 9:return t.next=11,m({short:p.short,long:p.long});case 11:r=t.sent,a={open:!0,title:"Sorry :(",content:"An error occured and we were not able to create the short link."},r&&200===r.status?e.handleUpdateData(p):c(a);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(j.a,{width:{xs:"100%",md:"100%",lg:"100%"},children:Object(C.jsx)(z.a,{className:"form",elevation:0,children:Object(C.jsxs)("form",{children:[Object(C.jsx)(R.a,{variant:"h6",children:"Shorten a link"}),Object(C.jsxs)("div",{className:"form-fields",children:[Object(C.jsx)(Y.a,{required:!0,placeholder:"Link Name",variant:"outlined",margin:"dense",onChange:function(e){return O(Object(P.a)(Object(P.a)({},p),{},{name:e.target.value}))},InputLabelProps:{shrink:!0}}),Object(C.jsx)(Y.a,{required:!0,error:h,placeholder:"URL",variant:"outlined",margin:"dense",onChange:function(e){return t=e.target.value.replace(/ /g,""),d(!/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi.test(t)),void O(Object(P.a)(Object(P.a)({},p),{},{long:t,short:N(t)}));var t},helperText:"Please enter a valid URL",InputLabelProps:{shrink:!0}})]}),Object(C.jsxs)(j.a,{mt:1,children:["Short link: \xa0",Object(C.jsx)(R.a,{variant:"caption",children:g+x})]}),Object(C.jsx)(j.a,{my:2,display:"flex",alignContent:"right",children:Object(C.jsx)(Z.a,{variant:"contained",color:"primary",onClick:function(){return function(){return v.apply(this,arguments)}()},children:"Save"})})]})})}),Object(C.jsx)(A.a,{open:a.open,onClose:function(){c({open:!1,title:"",content:""})},children:Object(C.jsxs)(F.a,{children:[Object(C.jsx)(T.a,{children:a.title}),Object(C.jsx)(E.a,{children:a.content})]})})]})};n(195);function _(e){return Object(C.jsx)("div",{className:"sidebar",children:Object(C.jsxs)(j.a,{width:"100%",children:[Object(C.jsxs)(R.a,{className:"logo",variant:"h2",children:["URL",Object(C.jsx)("br",{}),"Shortener"]}),Object(C.jsx)(q,{handleUpdateData:e.handleUpdateData})]})})}var B=n(237),G=n(234),M=n(236),H=n(235),K=n(233),Q=n(116),V=n.n(Q),W=n(117),X=n.n(W);n(196);function $(e){var t=g+e.link.short,n=Object(r.useState)(!0),a=Object(u.a)(n,2),c=a[0],i=a[1];return Object(C.jsx)(K.a,{in:c,children:Object(C.jsxs)(z.a,{className:"link-card",elevation:3,children:[Object(C.jsx)(G.a,{className:"btn-delete",onClick:function(){return i(!1),void setTimeout((function(){e.handleDeleteLink(e.link)}),500)},children:Object(C.jsx)(V.a,{color:"disabled"})}),Object(C.jsxs)(H.a,{children:[Object(C.jsxs)(R.a,{className:"truncate",variant:"h6",children:[e.link.name," \xa0"]}),Object(C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(M.a,{href:t,children:t}),Object(C.jsxs)("button",{className:"btn-copy",onClick:function(){return e=t,void navigator.clipboard.writeText(e);var e},children:[Object(C.jsx)(X.a,{color:"disabled",fontSize:"inherit"}),"Copy"]})]}),Object(C.jsx)(R.a,{className:"truncate",variant:"body2",children:e.link.long})]})]})})}n(198);function ee(e){return e.loading?Object(C.jsx)("div",{className:"no-list-container",children:Object(C.jsx)(B.a,{})}):0===e.data.length?Object(C.jsx)("div",{className:"no-list-container",children:Object(C.jsx)(R.a,{variant:"h6",children:"You currently have no short links."})}):Object(C.jsx)(C.Fragment,{children:e.data.map((function(t){return Object(C.jsx)($,{handleDeleteLink:e.handleDeleteLink,link:t},t.short)}))})}var te=n(118),ne=Object(te.a)({typography:{fontFamily:["Inter","serif"].join(",")},spacing:8});n(199);var re=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),i=Object(u.a)(c,2),f=i[0],b=i[1];return Object(r.useEffect)((function(){var e=L();(function(){var t=Object(o.a)(s.a.mark((function t(){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),n=[],r=e.map((function(e){return k(e.short)})),t.abrupt("return",Promise.all(r).then((function(t){t.forEach((function(t){if(console.log(t.data),t){var r=e.find((function(e){return e.short===t.data.data.short})),a={name:r?r.name:"",short:t.data.data.short,long:""};switch(t.status){case 200:a.long=t.data.data.long,n.push(a);break;case 404:delete a.long,I(a);break;default:console.log("Something went wrong when trying to fetch link")}}})),a(n),b(!1)})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(C.jsxs)(d.a,{theme:ne,children:[Object(C.jsx)(D,{}),Object(C.jsxs)(h.a,{container:!0,"spacing-sm":0,"spacing-lg":1,alignItems:"stretch",children:[Object(C.jsx)(h.a,{item:!0,xs:12,sm:12,md:5,lg:4,xl:4,children:Object(C.jsx)(_,{handleUpdateData:function(e){a([e].concat(Object(l.a)(n))),delete e.long,function(e){var t=L();t.unshift({name:e.name,short:e.short}),localStorage.setItem("links",JSON.stringify(t))}(e)}})}),Object(C.jsx)(h.a,{item:!0,xs:12,sm:12,md:7,lg:8,xl:8,children:Object(C.jsx)(j.a,{mr:{xs:0,md:0,lg:2,xl:2},children:Object(C.jsx)(ee,{handleDeleteLink:function(e){a(n.filter((function(t){return t!==e}))),delete e.long,I(e)},loading:f,data:n})})})]})]})};c.a.render(Object(C.jsx)(re,{}),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.ae8c3836.chunk.js.map